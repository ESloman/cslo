import os;

var cwd = os.getcwd();

var file_to_open;
for (var path in os.listdir(cwd)) {
    if (file_to_open == nil and os.isfile(path)) {
        # success!
        file_to_open = os.join(cwd, path);
    }
}

print(file_to_open);
var opened = open(file_to_open, "r");
print(opened);

var contents = opened.read();

for (var line in contents.split("\n")) {
    print(line);
}

print("test");

# make sure we close the file
if (opened != nil) {
    opened.close();
}
print(opened);

var f = open("/tmp/test.txt", "w");
f.write("Hello, World!\n");
f.close();

var a = open("/tmp/test.txt", "a");
a.write("Appending some text.
");
a.close();

var t = open("/tmp/test.txt", "r");
print(t.read());
t.close();
